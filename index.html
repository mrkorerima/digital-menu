<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Menu</title>
</head>
<body>
<script src="script.js"></script>
<header>📋 Digital Menu</header>
<div class="menu" id="menu"></div>

<div id="order-popup">✅ Order Sent!</div>

<script>
// Menu data
const menuItems = [
    { name: "ጨጨብሳ በእንቁላል", description: "Cacabsaa Killeen", category: "ciree/ቁርስ", price: 250 },
    { name: "ጨጨብሳ እስፔሻል", description: "Cacabsaa Iispehsalaa(Kitfoni)", category: "ciree/ቁርስ", price: 300 },
    { name: "ጨጨብሳ ኖርማል", description: "Cacabsaa", category: "ciree/ቁርስ", price: 150 },
    { name: "ቡላ ፍርፍር እስፔውሻል", description: "Firfirii Bulaa Iispeshalaa", category: "ciree/ቁርስ", price: 300 },
    { name: "ቡላ ፍርፍር ኖርማል", description: "Firfirii Bulaa", category: "ciree/ቁርስ", price: 150 },
    { name: "ገንፎ እስፔሻል", description: "Marqaa Iispeshalaa", category: "ciree/ቁርስ", price: 300 },
    { name: "የቡላ ገንፎ", description: "Marqaa Bulaa", category: "ciree/ቁርስ", price: 150 },
    { name: "ቡላ ገንፎ እስፔሻል", description: "Marqaa Bulaa Iispehsalaa", category: "ciree/ቁርስ", price: 300 },
    { name: "ጭኮ", description: "Micciiraa", category: "ciree/ቁርስ", price: 500 },
    { name: "ቂንጬ", description: "Qincee", category: "ciree/ቁርስ", price: 150 },
    { name: "ቡላ ፍርፍር በአይብ", description: "Firfirii Bula Shalalan", category: "ciree/ቁርስ", price: 200 },
    { name: "እርጎ", description: "Itituu", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 80 },
    { name: "ትፈልቶ የቀዘቀዘ ወተት", description: "Aannan Kabanayee", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 40 },
    { name: "ለስላሳ", description: "Lalaffaa", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 40 },
    { name: "ውሃ 2 ሊትር", description: "Bishaan L2", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 35 },
    { name: "ውሃ 1 ሊትር", description: "Bishaan L1", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 25 },
    { name: "ውሃ 1/2 ሊትር", description: "Bishaan L1/2", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 25 },
    { name: "ተልባ ጁስ እስፔሻል", description: "Juisii Talbaa Ispeshalaa", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 100 },
    { name: "ተልባ ጁስ", description: "Juisii Talbaa", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 80 },
    { name: "ካሮት ጁስ", description: "Juisii Kaarotii", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 80 },
    { name: "ሀባብ ጁስ", description: "Juisii Habaabii", category: "gosa dhugaatii/የመጠጥ ዝርዝር", price: 80 },
    { name: "ማኪያቶ", description: "Macchiato", category: "dhugaatii ho'aa/ትኩስ መጠጦች", price: 40 },
    { name: "ቡና", description: "Buna", category: "dhugaatii ho'aa/ትኩስ መጠጦች", price: 30 },
    { name: "ሻይ", description: "Shaayii", category: "dhugaatii ho'aa/ትኩስ መጠጦች", price: 25 }
];

// Get table number from URL
const urlParams = new URLSearchParams(window.location.search);
const tableNumber = urlParams.get('table') || "Unknown";

// Display menu
const menuDiv = document.getElementById("menu");
menuItems.forEach(item => {
    const div = document.createElement("div");
    div.classList.add("menu-item");
    div.innerHTML = `
        <h3>${item.name} - ${item.price} Br</h3>
        <p>${item.description}</p>
        <p><strong>Category:</strong> ${item.category}</p>
        <button onclick="sendOrder('${item.name}', ${item.price})">Order</button>
    `;
    menuDiv.appendChild(div);
});

// Send order to Google Sheet
function sendOrder(itemName, price) {
    const orderData = {
        table: tableNumber,
        item: itemName,
        price: price
    };

    fetch("https://script.google.com/macros/s/AKfycbyO2PJch9_-Y7lQKPCR67Ea8Dhy3S7JijaaCou3o4D9MA4g--CP4Byn4TcJekgYiQCv/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(orderData)
    })
    .then(res => res.json())
    .then(data => {
        if (data.status === "success") {
            document.getElementById("order-popup").style.display = "block";
            setTimeout(() => {
                document.getElementById("order-popup").style.display = "none";
            }, 3000);
        } else {
            alert("Error sending order.");
        }
    })
    .catch(err => {
        console.error("Error:", err);
        alert("Network error. Please try again.");
    });
}
</script>

</body>
</html>
